# Time log

- 10:02:21 起床，洗脸刷牙，换衣服，买早饭，吃早饭
- 10:34:43 冥想练习完成
- 11:29:26 `I/O Memory Mapped ASCII Console`部分复习，准备完成`hw6 trap`编写
- 12:26:27 完成`TRAP_PUTS`，尚未测试
- 13:06:32 实现`TRAP_DRAW_SQUARE` C++伪码
- 13:31:20 边界测试部分的 subroutine 和代码完成，后续完成 pixel 值的读写
- 13:57:47 完成初始化和循环框架
- 14:08:17 完成地址计算，先去吃个饭，回来准备测试两个 TRAP
- 15:54:55 吃了饭，在楼下走了 3 圈，回来看了会儿视频
- 16:30:23 `TRAP_PUTS`循环最后一句应该是`ADD R1,R1,#1`而不是`#0`,笔误了，修改后测试成功
- 20:20:39 其他函数都没有问题，只有`TRAP_DRAW_SQUARE`有问题，修复以后游戏成功运行，`hw6`完成
- 20:37:32 `hw6`过程中的错误总结完成
- 21:50:49 `Memory leaks & C程序结构 & 预处理过程 & makefile简介`学习
- 00:00:00 睡觉

# Minor-tasks

- [x] 冥想练习 1 次

# Summary

## 冥想体验

1. 接受自己
2. 一切都是人生中的一种体验，人生在于经历，潇洒走一回
3. 要把每次困难和挫折当成一种挑战
4. 情绪是正常的东西，人不可能没有情绪，但是要学会接受它，侧面看着它流过
5. 不要因为别人的话，去影响自己的情绪，自己的情绪是可以自己决定的，自己快乐，自己乐观，别人就影响不了我
6. 看开一切

## hw6 TRAP 编写过程中的错误总结

1. `RET`和`RTI`要分清楚，`RTI`除了返回上一个例程(地址在 R7 中)以外，还会把 Privilage Bit 位修改
2. 在 TRAP 中调用例程时，R7 会被改变，注意找个寄存器保存 R7，在调用完成后还原 R7，否则无法回到 Trap Table 那里去
3. 使用`TEMPS .UCONST X4200`来设置临时变量在 memory 中的位置，然后通过`LC R4, TEMPS`将其值保存到 R4 中，再通过`LDR R6, R4, #0`将 R4 地址处的值导入 R6
4. subroutine = function,我们可以把通用模块包装成一个 subroutine
5. 注意寄存器间的冲突关系（数量实在是给的太少了）
6. location = R4 + (r5 \* OS_VIDEO_NUM_COLS) + r6
7. 注意寄存器初始化的位置（最好先写 C 语言程序，再转为汇编）
8. 循环最后记得加上 R5 = R5 + 1(或者其他)，然后不要忘了`JMP <label>`
9. `TRAP`的最后记得`RTI`
